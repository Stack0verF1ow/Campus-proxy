define(["common/index"],function(o){"use strict";var e,n={},s=(SFConfig,SFLOG),a="UI:commno_loading";function updateTips(o){e.tips=o}return n.getVModelConfig=function(){return{$id:"common_loading",toggle:!0,tips:"loading....",$onRendered:function(o){var n,i,t=!1;o&&is.set(o.tips)&&(e.tips=o.tips),o&&is.set(o.isDialog)&&(e.toggle=o.isDialog),o&&is.fn(o.beforeShow)&&((i=o.beforeShow())&&is.fn(i.then)?i.then(function(){t?s.debug(a,"Loading task is done, not show loading"):(s.debug(a,"beforeShow is finished and loading task is not done, show loading"),e.toggle=!0)}):s.info(a,"The result of task is not Promise obj")),is.fn(o.task)?(n=o.task(updateTips))&&is.fn(n.then)?n.then(function(){s.info(a,"[timecount] loading task finished, hide loading"),e.toggle=!1,t=!0})["catch"](function(){s.debug(a,"loading task rejected, hide loading"),e.toggle=!1,t=!0}):s.info(a,"The result of task is not Promise obj"):s.info(a,"The task in data is not a function. loading will not auto hide")}}},(e=n.vmodel=avalon.define(n.getVModelConfig())).$watch("onHideLoading",function(){e.toggle=!1}),e.$watch("onShowLoading",function(){e.toggle=!0}),n});