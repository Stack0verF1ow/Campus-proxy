define(["common/index"],function(o){"use strict";var e,n={},t=SFLOG;function resetData(){e.token="",e.errorData="",e.toggle=!1,e.loading=!1}return n.getVModelConfig=function(){return{$id:"totp_signature",toggle:!1,token:"",errorData:"",loading:!1,autoFocus:!1,showRebind:!1,allowRebind:!1,$onRendered:function(n){e.allowRebind=n.allowRebind,e.showRebind=!!n.allowRebind,e.toggle=!0,e.autoFocus=!1,e.autoFocus=!0},onSubmit:function(){!function authTotp(){e.errorData="",8<e.token.length||e.token.length<6?e.errorData=tr("动态口令错误"):(e.loading=!0,SFAPI.loginTotp({token:e.token,success:function(n){t.info("ui:totp_signature","loginTotp success"),o.auth.codeHandler(n,{success:function(){resetData()},error:function(){e.loading=!1}})},error:function(n){e.loading=!1,e.errorData=SFCommon.getMessage(n.code)}}))}()},onDialogClose:function(){resetData()},unbindMobile:function(){!function unbind(){o.loader.renderPlugin({name:PORTAL_MAP["totp/unbind"],data:{allowRebind:e.allowRebind,callback:function(n){e.toggle=n}}})}()}}},e=n.vmodel=avalon.define(n.getVModelConfig()),n});